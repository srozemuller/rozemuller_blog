<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Graph API on Sander Rozemuller | All about Identity, AVD, Automation, DevOps, Monitoring, Intune and Security</title><link>https://www.rozemuller.com/tags/graph-api/</link><description>Recent content in Graph API on Sander Rozemuller | All about Identity, AVD, Automation, DevOps, Monitoring, Intune and Security</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Sun, 31 Mar 2024 18:56:33 +0200</lastBuildDate><atom:link href="https://www.rozemuller.com/tags/graph-api/index.xml" rel="self" type="application/rss+xml"/><item><title>Import Reuseable EPM Certificates in Intune automated</title><link>https://www.rozemuller.com/import-reusable-epm-certificates-in-intune-automated/</link><pubDate>Fri, 14 Jul 2023 16:39:01 +0200</pubDate><guid>https://www.rozemuller.com/import-reusable-epm-certificates-in-intune-automated/</guid><description>&lt;p>As you may know there is a &lt;a href="https://discord.com/invite/msems"




 target="_blank"
 


>Microsoft EMS Community&lt;/a>
 Discord channel where we help out eachother. Recently there was a question about how to import certificate file as reusable setting in Endpoint Privilege Management using the Graph API. Together with Steven van Beek we answered that question on how to bulk import certificates using the Graph API. To also help others I like to share the solution.&lt;/p></description></item><item><title>Monitor assigned roles outside PIM and sent to MS Teams using OpenAI</title><link>https://www.rozemuller.com/monitor-assigned-roles-outside-pim-and-sent-to-ms-teams-using-openai/</link><pubDate>Fri, 14 Jul 2023 16:39:01 +0200</pubDate><guid>https://www.rozemuller.com/monitor-assigned-roles-outside-pim-and-sent-to-ms-teams-using-openai/</guid><description>&lt;p>Another big helper in implementing a Zero Trust environment is the use of Privileged Identity Management, aka PIM. It is a best practice assigning the least permissions as needed for the shortest amount of time. PIM helps you with that.
After implementing PIM you have left-overs of admins assign roles to identities without PIM. In that case there is a mechanism that check if there are roles assign outside PIM.&lt;/p></description></item><item><title>Monitor Conditional Access changes using OpenAI and MS Teams</title><link>https://www.rozemuller.com/monitor-conditional-access-changes-using-openai-and-teams/</link><pubDate>Thu, 08 Jun 2023 16:39:01 +0200</pubDate><guid>https://www.rozemuller.com/monitor-conditional-access-changes-using-openai-and-teams/</guid><description>&lt;p>Implementing conditional access policies have a huge impact on your identities and organisation. After implementation, there could be a situation conditional policies need changes. Think about the state, adding or excluding users, or adding a security strength for example.&lt;/p></description></item><item><title>Check Conditional Access Policy Effect Automated</title><link>https://www.rozemuller.com/check-conditional-access-policy-effect-automated/</link><pubDate>Mon, 08 May 2023 20:40:49 +0200</pubDate><guid>https://www.rozemuller.com/check-conditional-access-policy-effect-automated/</guid><description>&lt;p>In earlier posts I created several conditional access policies in an automated way. During the time policies may change, users will be added to a specific Azure role, groups are added and so many more.&lt;br>
All those changes effect on how conditional access policies act. Because of that, it is recommended to check your conditional access policies environment so now and then.&lt;/p></description></item><item><title>Passwordless, Multi-layered Break Glass Alternative Automated</title><link>https://www.rozemuller.com/passwordless-multilayered-break-glass-alternative-automated/</link><pubDate>Fri, 14 Apr 2023 09:15:27 +0200</pubDate><guid>https://www.rozemuller.com/passwordless-multilayered-break-glass-alternative-automated/</guid><description>&lt;p>Emergency accounts are a fundamental part of any security strategy. They are used to access systems when the primary account is unavailable or locked out. In the past, emergency accounts were often called “break glass” accounts. In an earlier post, I explained &lt;a href="../configure-break-glass-accounts-infrastructure-automated/"



 


>how to create an emergency account based on a user account with a password&lt;/a>
. In this post, I will show you how to automate the creation of a passwordless, multi-layered emergency account using Graph API.&lt;/p></description></item><item><title>Zero Trust Data Protection Using App Protection Policies Automated</title><link>https://www.rozemuller.com/zero-trust-data-protection-using-app-protection-policies-automated/</link><pubDate>Thu, 30 Mar 2023 20:40:49 +0200</pubDate><guid>https://www.rozemuller.com/zero-trust-data-protection-using-app-protection-policies-automated/</guid><description>&lt;p>In earlier steps, I explained how to control identity and devices to connect to your environment. Now people are connected to your environment safely, the next step is to make sure your data won&amp;rsquo;t walk out.&lt;br>
In this step of the Zero to Zero Trust journey we will look at the first step of how to keep your data safe. In this blog, I show how to automate the creation of App Protection Policies. Intune App Protection policies help protect corporate data even if a device itself is not managed.&lt;/p></description></item><item><title>Zero Trust Common Identity and Device Access Protection</title><link>https://www.rozemuller.com/zero-trust-common-identity-and-device-access-protection/</link><pubDate>Tue, 14 Mar 2023 13:53:14 +0100</pubDate><guid>https://www.rozemuller.com/zero-trust-common-identity-and-device-access-protection/</guid><description>&lt;p>This is the 3rd step in the series Zero to Zero Trust in an automated way. In the previous steps, we configured an emergency account and protected the account with conditional access policies. The conditional access policies control the log-in process. In this step, we configure access policies for other users and devices.&lt;/p></description></item><item><title>Protect Privileged Accounts the Zero Trust Way Automated</title><link>https://www.rozemuller.com/protect-privileged-accounts-the-zero-trust-way-automated/</link><pubDate>Sun, 05 Mar 2023 09:17:14 +0100</pubDate><guid>https://www.rozemuller.com/protect-privileged-accounts-the-zero-trust-way-automated/</guid><description>&lt;p>Identities are the key to environments and must be configured as securely as possible. To achieve this goal, conditional access policies are indispensable. In this blog post, I show how to secure privileged accounts that need more attention than MFA only. This post shows how to configure Zero Trust conditional access policies in an automated way.&lt;br>
This is the next step in our Zero to Zero Trust journey.&lt;/p></description></item><item><title>Configure Break Glass Accounts Infrastructure Automated</title><link>https://www.rozemuller.com/configure-break-glass-accounts-infrastructure-automated/</link><pubDate>Mon, 13 Feb 2023 08:30:15 +0100</pubDate><guid>https://www.rozemuller.com/configure-break-glass-accounts-infrastructure-automated/</guid><description>&lt;p>Nowadays a good cloud environment has strict security policies. Well-known policies are conditional access policies. Policies that require a compliant device before login for example or forcing MFA. Configuring conditional access is good but there is always a risk of lockout yourself. To not lock yourself out, you must create an emergency account.&lt;/p></description></item><item><title>Delete AAD and Intune devices based on CSV and Graph API</title><link>https://www.rozemuller.com/delete-aad-intune-devices-based-on-csv-and-graph-api/</link><pubDate>Sat, 28 Jan 2023 10:52:11 +0100</pubDate><guid>https://www.rozemuller.com/delete-aad-intune-devices-based-on-csv-and-graph-api/</guid><description>&lt;p>The power of community is to collaborate and help others achieve goals. In this case, I got a question from a good community friend to help write a script that removes over 6000 devices from Intune and Azure Active Directory. The base is a CSV file filled with Intune devices IDs.&lt;/p></description></item><item><title>Automate user sign-in experience with company branding</title><link>https://www.rozemuller.com/automated-user-sign-in-experience-with-company-branding/</link><pubDate>Tue, 10 Jan 2023 01:28:14 +0200</pubDate><guid>https://www.rozemuller.com/automated-user-sign-in-experience-with-company-branding/</guid><description>&lt;p>Recently Microsoft redesigned the company branding functionality. That means you have more flexibility in the main layout, full-screen background image for example. But also the ability to change the header, footer and even link relating to self-service password reset, privacy &amp;amp; cookies or Terms of Use.
Also, there is an option to upload a CSS style sheet to change colors, buttons, and more.&lt;/p></description></item><item><title>Enroll Defender For Endpoint automated</title><link>https://www.rozemuller.com/monitor-intune-using-azure-functions-powershell-and-graph-api/</link><pubDate>Wed, 28 Sep 2022 09:12:46 +0200</pubDate><guid>https://www.rozemuller.com/monitor-intune-using-azure-functions-powershell-and-graph-api/</guid><description>&lt;p>&lt;a href="https://learn.microsoft.com/en-us/mem/intune/protect/advanced-threat-protection-configure"




 target="_blank"
 


>https://learn.microsoft.com/en-us/mem/intune/protect/advanced-threat-protection-configure&lt;/a>
&lt;/p>
&lt;h2 id="microsoft-intune-connection---on">Microsoft Intune Connection -&amp;gt; On&lt;/h2>
&lt;p>Find the if there is a connector already. Otherwise, create one.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>$url = &lt;span style="color:#e6db74">&amp;#34;https://graph.microsoft.com/beta/deviceManagement/mobileThreatDefenseConnectors/fc780465-2017-40d4-a0c5-307022471b92&amp;#34;&lt;/span> &lt;span style="color:#75715e">#/fc780465-2017-40d4-a0c5-307022471b92&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$request = Invoke-RestMethod -Uri $url -Method Get -Headers $authHeader
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$request.value | ConvertTo-Json -Depth &lt;span style="color:#ae81ff">9&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$body = @{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> androidEnabled = $false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iosEnabled = $false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> androidDeviceBlockedOnMissingPartnerData = $false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iosDeviceBlockedOnMissingPartnerData = $false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> partnerUnsupportedOsVersionBlocked = $false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> windowsEnabled = $false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> partnerUnresponsivenessThresholdInDays = &lt;span style="color:#ae81ff">6&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>} | ConvertTo-Json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$postRequest = Invoke-RestMethod -Uri $url -Method Patch -Headers $authHeader -Body $body
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$postRequest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img alt="available-dfe-connector.png" src="https://www.rozemuller.com/monitor-intune-using-azure-functions-powershell-and-graph-api/available-dfe-connector.png">&lt;/p></description></item><item><title>Monitor Intune using Azure Functions, PowerShell, Graph API and MS Teams</title><link>https://www.rozemuller.com/monitor-intune-using-azure-functions-powershell-and-graph-api/</link><pubDate>Wed, 28 Sep 2022 09:12:46 +0200</pubDate><guid>https://www.rozemuller.com/monitor-intune-using-azure-functions-powershell-and-graph-api/</guid><description>&lt;p>Intune and the rest of Microsoft Intune are growing. To keep your environment nice, clean and secure it is a good idea to monitor your MEM environment.
In this blog, I explain how to monitor Intune based on Graph API and PowerShell with Azure Functions.&lt;/p></description></item><item><title>Configure AVD Start VM on Connect automated with role assignments and Graph API</title><link>https://www.rozemuller.com/configure-avd-start-vm-on-connect-automated-with-role-assignments-and-graph-api/</link><pubDate>Thu, 01 Apr 2021 15:46:08 +0200</pubDate><guid>https://www.rozemuller.com/configure-avd-start-vm-on-connect-automated-with-role-assignments-and-graph-api/</guid><description>&lt;p>Costs are a topic of an Azure conversation very often. As we all know you pay for usage, if it is storage, CPU or bandwidth usage, (almost) every resource has its price. For Windows Virtual Desktop it means you have to pay for CPU usage, for example. It is important then to keep this usage as low as possible. Now there is an option to keep these usage as low as possible with AVD Start VM on Connect.&lt;/p></description></item><item><title>Monitor active M365 ServiceHealth services only with PowerShell</title><link>https://www.rozemuller.com/monitor-active-m365-servicehealth-services-only-with-powershell/</link><pubDate>Tue, 29 Sep 2020 11:55:44 +0200</pubDate><guid>https://www.rozemuller.com/monitor-active-m365-servicehealth-services-only-with-powershell/</guid><description>&lt;p>You have some Microsoft 365 (M365) customers which you like to monitor. Every day you are looking at the customer specific M365 portal looking for Microsoft event.&lt;/p></description></item></channel></rss>